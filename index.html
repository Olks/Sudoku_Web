<!DOCTYPE html>
<!-- Write your comments here -->

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="mystyle.css">
    <title>My Webpage</title>
	<script>
	 function new_sudoku(transpose, rotate) {
	 
		document.getElementById("test").innerHTML = rotate + "," + transpose
	 
		var a = 1; b = 2; c = 3; d = 4; e = 5; f = 6; g = 7; h = 8; i = 9;
		var new_values = [
						  ["","","","","","","",d ,""],
						  [e ,d ,"",c ,g ,"",a ,"",""],
						  ["",f ,"",i ,b ,"","",h ,e ],
						  ["",e ,g ,a ,c ,f ,"",b ,""],
						  ["",a ,"","","","","",g ,""],
						  ["",b ,"",d ,e ,g ,i ,c ,""],
						  [f ,h ,"","",a ,i ,"",e ,""],
						  ["","",e ,"",h ,c ,"",a ,d ],
						  ["",c ,"","","","","","",""] 
						 ];
						 
		new_values = new_values[0].map((col, i) => new_values.map(row => row[new_values.length - i - 1]));
		
		if(transpose == 1) {
			new_values = new_values[0].map((col, i) => new_values.map(row => row[i]));
			}
		
		var k;
		for (k = 0; k < rotate; k++) {
			new_values = new_values[0].map((col, i) => new_values.map(row => row[8 - i]));
		}
		
		var i; 
		var j;
		for (i = 1; i < 10; i++) {
			for (j = 1; j < 10; j++) {
				document.getElementById("cell" + i + j).innerHTML = new_values[i-1][j-1]
			}
		}
	 }
	</script>
    <script>
      function check_if_done() {
        var check_sum = 0
        var i;
		var j;
        for (i = 0; i < 9; i++) {
			var square = []
			var row = []
			var col = []
			for (j = 0; j < 9; j++) {
				square[j] = Number(document.getElementById("cell" + ((Math.floor(j/3) + 1)*10 + (j%3 + 1) + Math.floor(i/3)*30 + (i%3)*3)).innerHTML);
				row[j] = Number(document.getElementById("cell" + ((i + 1)*10 + (j + 1))).innerHTML);
				col[j] = Number(document.getElementById("cell" + ((j + 1)*10 + (i + 1))).innerHTML);
			}
			var sorted_joined_square = square.sort(function(a, b){return a - b}).join('');
			var sorted_joined_row = row.sort(function(a, b){return a - b}).join('');
			var sorted_joined_col = col.sort(function(a, b){return a - b}).join('');

			  if (sorted_joined_square == '123456789' && 
				  sorted_joined_row == '123456789' && 
				  sorted_joined_col == '123456789') {
				check_sum += 1
			  }
			}
        if (check_sum == 9) {
            document.getElementById("p01").innerHTML = "Done!"
        } else {
            document.getElementById("p01").innerHTML = "Sudoku not solved yet ..."
          }
      }
    </script>

  </head>

  <body>

<p id="p01" title="I'm a tooltip">
Solve the sudoku!
</p>

<table id = "all_cells">
  <tr>
    <th id = "cell11" contenteditable="true"></th>
    <th id = "cell12" contenteditable="true"></th>
    <th id = "cell13" class="separate_table" contenteditable="true"></th>
    <th id = "cell14" contenteditable="true"></th>
    <th id = "cell15" contenteditable="true"></th>
    <th id = "cell16" class="separate_table" contenteditable="true"></th>
    <th id = "cell17" contenteditable="true"></th>
    <th id = "cell18" contenteditable="true"></th>
    <th id = "cell19" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr>
    <th id = "cell21" contenteditable="true"></th>
    <th id = "cell22" contenteditable="true"></th>
    <th id = "cell23" class="separate_table" contenteditable="true"></th>
    <th id = "cell24" contenteditable="true"></th>
    <th id = "cell25" contenteditable="true"></th>
    <th id = "cell26" class="separate_table" contenteditable="true"></th>
    <th id = "cell27" contenteditable="true"></th>
    <th id = "cell28" contenteditable="true"></th>
    <th id = "cell29" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr class="table_separable">
    <th id = "cell31" contenteditable="true"></th>
    <th id = "cell32" contenteditable="true"></th>
    <th id = "cell33" class="separate_table" contenteditable="true"></th>
    <th id = "cell34" contenteditable="true"></th>
    <th id = "cell35" contenteditable="true"></th>
    <th id = "cell36" class="separate_table" contenteditable="true"></th>
    <th id = "cell37" contenteditable="true"></th>
    <th id = "cell38" contenteditable="true"></th>
    <th id = "cell39" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr>
    <th id = "cell41" contenteditable="true"></th>
    <th id = "cell42" contenteditable="true"></th>
    <th id = "cell43" class="separate_table" contenteditable="true"></th>
    <th id = "cell44" contenteditable="true"></th>
    <th id = "cell45" contenteditable="true"></th>
    <th id = "cell46" class="separate_table" contenteditable="true"></th>
    <th id = "cell47" contenteditable="true"></th>
    <th id = "cell48" contenteditable="true"></th>
    <th id = "cell49" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr>
    <th id = "cell51" contenteditable="true"></th>
    <th id = "cell52" contenteditable="true"></th>
    <th id = "cell53" class="separate_table" contenteditable="true"></th>
    <th id = "cell54" contenteditable="true"></th>
    <th id = "cell55" contenteditable="true"></th>
    <th id = "cell56" class="separate_table" contenteditable="true"></th>
    <th id = "cell57" contenteditable="true"></th>
    <th id = "cell58" contenteditable="true"></th>
    <th id = "cell59" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr class="table_separable">
    <th id = "cell61" contenteditable="true"></th>
    <th id = "cell62" contenteditable="true"></th>
    <th id = "cell63" class="separate_table" contenteditable="true"></th>
    <th id = "cell64" contenteditable="true"></th>
    <th id = "cell65" contenteditable="true"></th>
    <th id = "cell66" class="separate_table" contenteditable="true"></th>
    <th id = "cell67" contenteditable="true"></th>
    <th id = "cell68" contenteditable="true"></th>
    <th id = "cell69" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr>
    <th id = "cell71" contenteditable="true"></th>
    <th id = "cell72" contenteditable="true"></th>
    <th id = "cell73" class="separate_table" contenteditable="true"></th>
    <th id = "cell74" contenteditable="true"></th>
    <th id = "cell75" contenteditable="true"></th>
    <th id = "cell76" class="separate_table" contenteditable="true"></th>
    <th id = "cell77" contenteditable="true"></th>
    <th id = "cell78" contenteditable="true"></th>
    <th id = "cell79" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr>
    <th id = "cell81" contenteditable="true"></th>
    <th id = "cell82" contenteditable="true"></th>
    <th id = "cell83" class="separate_table" contenteditable="true"></th>
    <th id = "cell84" contenteditable="true"></th>
    <th id = "cell85" contenteditable="true"></th>
    <th id = "cell86" class="separate_table" contenteditable="true"></th>
    <th id = "cell87" contenteditable="true"></th>
    <th id = "cell88" contenteditable="true"></th>
    <th id = "cell89" class="separate_table" contenteditable="true"></th>
  </tr>
  <tr class="table_separable">
    <th id = "cell91" contenteditable="true"></th>
    <th id = "cell92" contenteditable="true"></th>
    <th id = "cell93" class="separate_table" contenteditable="true"></th>
    <th id = "cell94" contenteditable="true"></th>
    <th id = "cell95" contenteditable="true"></th>
    <th id = "cell96" class="separate_table" contenteditable="true"></th>
    <th id = "cell97" contenteditable="true"></th>
    <th id = "cell98" contenteditable="true"></th>
    <th id = "cell99" class="separate_table" contenteditable="true"></th>
  </tr>
</table>

<hr>

<button type="button" 
		onclick = "new_sudoku(
				Math.floor((Math.random() * 2)), 
				Math.floor((Math.random() * 3)))">New Sudoku
</button>
<p id = 'test'> "..." </p>
<script>new_sudoku()</script>
<script>
    document.getElementById("all_cells").addEventListener("input", function() {
        check_if_done()}
      )
//     function() {
//       document.getElementById("cell15").innerHTML = Number(document.getElementById("cell15").innerHTML) + Number(1)});
  </script>



  </body>
</html>
